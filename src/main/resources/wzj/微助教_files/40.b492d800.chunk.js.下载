(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1117:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),i=n(240),s=n.n(i),o=n(15),c=n.n(o),u=n(23),l=n.n(u),p=n(46),d=n.n(p),m=n(47),S=n.n(m),f=n(48),E=n.n(f),h=n(49),_=n.n(h),I=n(50),g=n.n(I),w=n(89),T=n.n(w),v=n(33),A=n.n(v),y=n(1),P=n.n(y),O=(n(3),n(25)),b=n(19),L=n(221),C=n(222),R=n(281),N=n(24),U=n(234),x=function(){return Object(N.a)(function(e){return e.get("paperQuestionsList")},U.a,function(e,t){return a()({},e&&e.toJS(),{query:t})})},D=n(18),Q=n(273),k=Object(D.fromJS)({loading:!1,loadingMore:!1,submitLoading:!1,loadingData:!1,isRecording:!1});var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q.a.GET_PAPERS_DETAIL:return e.set("loading",!0).set("papersDetail",Object(D.fromJS)({}));case Q.a.GET_PAPERS_DETAIL_SUCCESS:return e.set("loading",!1).set("papersDetail",Object(D.fromJS)(t.payload));case Q.a.GET_PAPERS_DETAIL_FAIL:return e.set("loading",!1);case Q.a.GET_PAPERS_QUESTIONS_LIST:return e.set("loadingData",!0).set("papersQuestionsList",Object(D.fromJS)([]));case Q.a.GET_PAPERS_QUESTIONS_LIST_SUCCESS:var n=t.payload;return e.set("loadingData",!1).set("papersQuestionsList",Object(D.fromJS)(n));case Q.a.GET_PAPERS_QUESTIONS_LIST_FAIL:return e.set("loadingData",!1);case Q.a.LOAD_MORE_PAPERS_QUESTIONS_LIST:return e.set("loadingMore",!0);case Q.a.LOAD_MORE_PAPERS_QUESTIONS_LIST_SUCCESS:var r=e.get("papersQuestionsList")&&e.get("papersQuestionsList").concat(Object(D.fromJS)(t.payload));return e.set("loadingMore",!1).set("papersQuestionsList",Object(D.fromJS)(r));case Q.a.LOAD_MORE_PAPERS_QUESTIONS_LIST_FAIL:return e.set("loadingMore",!1);case Q.a.SUBMIT_PAPERS_ANSWER:return e.set("submitLoading",!0);case Q.a.SUBMIT_PAPERS_ANSWER_SUCCESS:case Q.a.SUBMIT_PAPERS_ANSWER_FAIL:return e.set("submitLoading",!1);case Q.a.CHANGE_PAPER_DETAIL_OPEN_STATUS:return e.setIn(["papersDetail","status"],3);case Q.a.SET_LOADING_STATUS_TRUE:return e.set("loadingData",!0);case Q.a.SET_LOADING_STATUS_FALSE:return e.set("loadingData",!1);case Q.a.CHANGE_RECORDING_STATUS:return e.set("isRecording",t.payload);default:return e}},j=(n(265),n(53)),q=n(264),G=n(318),W=c.a.mark(J),B=c.a.mark(K),M=c.a.mark(Y),V=c.a.mark(Z),H=c.a.mark(X),z=c.a.mark($);function J(e){var t;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(j.b)(G.c,e.paperId);case 3:return t=n.sent,n.next=6,Object(j.c)(Object(R.getPapersDetailSuccess)(t));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(j.c)(Object(R.getPapersDetailFail)(n.t0));case 12:case"end":return n.stop()}},W,this,[[0,8]])}function K(e){var t,n;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(j.b)(G.e,e.payload);case 3:return t=r.sent,r.next=6,Object(j.c)(Object(R.getPapersQuestionsListSuccess)(t));case 6:r.next=16;break;case 8:return r.prev=8,r.t0=r.catch(0),n="获取组卷题目失败",r.t0.response&&(n=r.t0.response.msg||r.t0.response.message),r.next=14,q.a.emit("showTopTips",n);case 14:return r.next=16,Object(j.c)(Object(R.getPapersQuestionsListFail)(r.t0));case 16:case"end":return r.stop()}},B,this,[[0,8]])}function Y(e){var t,n,r;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.loadingMoreSuc,a.prev=1,a.next=4,Object(j.b)(G.e,e.payload);case 4:return n=a.sent,a.next=7,Object(j.c)(Object(R.loadMorePapersQuestionsListSuccess)(n));case 7:t&&t(),a.next=18;break;case 10:return a.prev=10,a.t0=a.catch(1),r="加载组卷题目失败",a.t0.response&&(r=a.t0.response.msg||a.t0.response.message),a.next=16,q.a.emit("showTopTips",r);case 16:return a.next=18,Object(j.c)(Object(R.loadMorePapersQuestionsListFail)(a.t0));case 18:case"end":return a.stop()}},M,this,[[1,10]])}function Z(e){var t,n,r;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.papersId,a.prev=1,a.next=4,Object(j.b)(G.i,e.payload);case 4:return n=a.sent,a.next=7,Object(j.c)(Object(R.submitPapersAnswerSuccess)(n));case 7:return a.next=9,q.a.emit("afterSubmitPaper");case 9:return a.next=11,Object(j.c)(Object(R.getPapersDetail)(t));case 11:return a.next=13,Object(j.c)(Object(R.getPapersQuestionsList)({papersId:t,page:0}));case 13:a.next=24;break;case 15:return a.prev=15,a.t0=a.catch(1),"提交组卷答案失败",r="",a.t0.response&&(r=a.t0.response.msg||a.t0.response.message||"提交组卷答案失败"),a.next=22,q.a.emit("showTopTips",r);case 22:return a.next=24,Object(j.c)(Object(R.submitPapersAnswerFail)(a.t0));case 24:case"end":return a.stop()}},V,this,[[1,15]])}function X(e){var t,n,r,a,i,s,o,u,l,p,d;return c.a.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.serverId,r=t.saveWeixinRecordInfo,a=t.upLoadFail,i=t.cancelUploadingStatus,c.prev=1,c.next=4,Object(j.b)(G.k,n);case 4:s=c.sent,o=s.url,u=s.name,l=s.type,p=s.key,o?(i(),r({url:o,name:u,type:l,key:p})):a(),c.next=16;break;case 9:return c.prev=9,c.t0=c.catch(1),"上传录音失败",d="",c.t0.response&&(d=c.t0.response.msg||c.t0.response.message||"上传录音失败"),c.next=16,q.a.emit("showTopTips",d);case 16:case"end":return c.stop()}},H,this,[[1,9]])}function $(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.a)([Object(j.d)(Q.a.GET_PAPERS_DETAIL,J),Object(j.d)(Q.a.GET_PAPERS_QUESTIONS_LIST,K),Object(j.d)(Q.a.SUBMIT_PAPERS_ANSWER,Z),Object(j.d)(Q.a.LOAD_MORE_PAPERS_QUESTIONS_LIST,Y),Object(j.d)(Q.a.UPLOAD_RECORD,X)]);case 2:case"end":return e.stop()}},z,this)}var ee=n(34),te=n(208),ne=n(475),re=n(502),ae=n(212),ie=n(956),se=n.n(ie),oe=Object(ae.a)("aq_close.svg"),ce={isAnsweredItemStyle:{backgroundColor:"rgba(97,120,143,1)",color:"#fff"},notAnsweredItemStyle:{backgroundColor:"#F5F5F5",color:"#61788F",border:"2px solid #61788F"},answeredRight:{backgroundColor:"rgba(90,150,25,0.1)",color:"#5A9619",border:"2px solid #5A9619"},answeredWrong:{backgroundColor:"rgba(255,50,40,0.1)",color:"#FF3228",border:"2px solid #FF3228"}};function ue(e){var t=e.closeAnswerSheet,n=e.goClickedQuestions,r=e.subQuestionNum,a=e.answeredQuestionsNum,i=e.isAnswered,s=e.answerSheetStatus,o=void 0===s?[]:s,c=e.subQuestions,u=void 0===c?[]:c,l=e.answerOpen,p=0,d=0,m=0,S=0;return u&&!Object(ee.isEmpty)(u)&&1===i&&(d=r-(p=u.filter(function(e){return 1===e.isAnswered}).length),1===l&&(m=(u.filter(function(e){return 1===e.isCorrect})||[]).length,S=(u.filter(function(e){return 1===e.isObjective&&0===e.isCorrect})||[]).length)),P.a.createElement("div",{className:se.a.answerSheetWrap},P.a.createElement("button",{className:se.a.closeBtn,onClick:t},P.a.createElement("i",{className:se.a.sheetCloseIcon,style:{backgroundImage:"url(".concat(oe,")")}})),P.a.createElement("div",null,P.a.createElement("div",{style:{color:"rgba(0,0,0,0.7)",fontSize:"12px"}},"点击题号可快速定位到该题"),P.a.createElement("div",{className:se.a.lengend},0===i?[P.a.createElement("div",{className:se.a.isNowAnswered,key:1},"已答 ( ".concat(a," )")),P.a.createElement("div",{className:se.a.noAnswered,key:0},"未答 ( ".concat(r-a," )"))]:[P.a.createElement("div",{className:se.a.isNowAnswered,key:1},"已答 ( ".concat(p," )")),P.a.createElement("div",{className:se.a.noAnswered,key:2},"未答 ( ".concat(d," )")),P.a.createElement("div",{className:se.a.answeredRight,key:3},"答对 ( ".concat(m," )")),P.a.createElement("div",{className:se.a.answeredWrong,key:4},"答错 ( ".concat(S," )"))]),P.a.createElement("div",{className:se.a.numberWrap},u&&u.map(function(e,t){var r=o&&o.find(function(t){return t.questionId===e.id}),a=!(!r||!r.isAnswered),s=e,c=ce.notAnsweredItemStyle;return!i&&a&&(c=ce.isAnsweredItemStyle),i&&s.isAnswered&&(c=ce.isAnsweredItemStyle,l&&(1===s.isCorrect&&(c=ce.answeredRight),s.isObjective&&0===s.isCorrect&&(c=ce.answeredWrong))),P.a.createElement("button",{className:se.a.numberItem,style:c,onClick:function(){n(t+1)},key:t},t+1)}))))}ue.defaultProps={chapterList:[]};var le=ue,pe=n(16),de=n(271),me=n(359),Se=n(958),fe=n.n(Se),Ee=(n(960),Object(ae.a)("aq_white_star.svg")),he=Object(ae.a)("aq_navigation.svg"),_e=Object(ae.a)("aq_refresh.svg"),Ie=Object(ae.a)("aq_alarm.svg"),ge=Object(L.a)({key:"paperQuestionsList",reducer:F}),we=Object(C.a)({key:"paperQuestionsList",saga:$}),Te=5,ve=function(e){function t(){var e,n;d()(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=E()(this,(e=_()(t)).call.apply(e,[this].concat(i))),A()(T()(T()(n)),"state",{isShowAnswerSheet:!1,studentAnswer:[],currentPage:0,shortQuestionsFiles:[],isSureSubmitDialogShow:!1,isShowSuccessToast:!1,leftTime:0,currentQuestionsNum:1,isTopTipsShow:!1,topTipsText:"",recordsUrlArr:[],weixinRecord:[],isKeyBordShow:!1,audioPlayerShow:!1,previewVoiceUrl:"",previewIframe:""}),A()(T()(T()(n)),"submitTick",function(){!n.firstExcuteSubmitTick&&n.autoSubmitChangeAnswer(),n.submitTimer&&clearTimeout(n.submitTimer),n.submitTimer=setTimeout(n.submitTick,1e3*Te),n.firstExcuteSubmitTick&&(n.firstExcuteSubmitTick=!1)}),A()(T()(T()(n)),"autoSubmitChangeAnswer",l()(c.a.mark(function e(){var t,r,a,i,s,o,u,l,p,d,m,S,f,E,h=arguments;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(h.length>0&&void 0!==h[0])||h[0],r=n.formatSubmitAnswer(),a=n.formatArrToObj(r),i=n.state.leftTime,s=n.props.match.params,o=s.courseId,u=s.papersId,l={courseId:o,papersId:u,answer:a,isOnceAnswer:n.firstSubmit?1:void 0},e.prev=6,e.next=9,Object(G.h)(l);case 9:if(e.t0=e.sent,e.t0){e.next=12;break}e.t0={};case 12:p=e.t0,d=p.needRefresh,m=p.timingClose,S=p.msg,n.firstSubmit=!1,t&&(d&&(n.topTipsShow(S||"已自动收卷"),n.afterSubmitPaper(),n.props.actions.getPapersDetail(u),n.props.actions.getPapersQuestionsList({papersId:u,page:0})),Math.abs(m-i)>5&&n.setState({leftTime:m})),e.next=25;break;case 20:e.prev=20,e.t1=e.catch(6),f="获取数据异常",e.t1.response&&(E=e.t1.response.message,f=E),n.topTipsShow(f);case 25:case"end":return e.stop()}},e,this,[[6,20]])}))),A()(T()(T()(n)),"formatArrToObj",function(e){return Object(ee.isEmpty)(e)?{}:e.reduce(function(e,t){return e[t.questionId]=JSON.stringify(t),e},{})}),A()(T()(T()(n)),"formatServerAnswer",function(e){if(e&&!e[0]){var t=[];return Object.keys(e).map(function(n){var r=JSON.parse(e[n]);t=s()(t).concat([r])}),t}return[]}),A()(T()(T()(n)),"formatSubmitAnswer",function(){var e=n.state,t=e.studentAnswer,r=e.shortQuestionsFiles,a=e.recordsUrlArr,i=e.weixinRecord;return n.mergeRecordsData(t,r,a,i)}),A()(T()(T()(n)),"isCanAnswer",function(e){var t=n.props.query.isWrongQuesPage,r=e.isAnswered,a=e.status;return 0===r&&(1===a||3===a)&&!t}),A()(T()(T()(n)),"resize",function(){(document.documentElement.clientHeight||document.body.clientHeight)<n.initialClientHeight?n.keyBordShowEvent():n.keyBordHideEvent()}),A()(T()(T()(n)),"keyBordShowEvent",function(){n.setState({isKeyBordShow:!0})}),A()(T()(T()(n)),"keyBordHideEvent",function(){n.setState({isKeyBordShow:!1})}),A()(T()(T()(n)),"scrollMethod",function(){n.listRef.current.addEventListener("scroll",function(){var e=n.props.papersDetail.subQuestionNum;n.listRef.current.scrollTop+n.listRef.current.clientHeight+600>=n.listRef.current.scrollHeight&&n.loadMoreList();for(var t=n.listRef.current.children,r=t.length,a=[],i=0;i<r;i++)n.listRef.current.scrollTop+180-t[i].offsetTop>0&&a.push(i+1);var s=Math.max.apply(null,a),o=s>e?e:s;n.setState({currentQuestionsNum:o})})}),A()(T()(T()(n)),"setInitStudentAnswer",function(e){var t=e.answerCache,r=e.prefix,a=n.formatServerAnswer(t),i=a.map(function(e){return{questionId:e.questionId,answer:e.answer}}),s=n.getImgFilesFromServerAnswer({serverAnswer:a,ossPrefix:r}),o=n.getVoiceArrFromServerAnswer({serverAnswer:a,ossPrefix:r}),c=n.mergedCacheAnswer(i,e.subQuestions);n.setState({studentAnswer:c||[],shortQuestionsFiles:s||[],recordsUrlArr:o||[],weixinRecord:[]})}),A()(T()(T()(n)),"getImgFilesFromServerAnswer",function(e){var t=e.serverAnswer,r=e.ossPrefix;return t.filter(function(e){return e.files&&!Object(ee.isEmpty)(e.files)}).map(function(e){var t=e.files.filter(function(e){return!n.isVoiceUrl(e)});if(!Object(ee.isEmpty)(t)){var a=t.map(function(e){return{fileKey:e,url:"".concat(r).concat(e)}});return{questionId:e.questionId,imgList:a}}}).filter(function(e){return e})}),A()(T()(T()(n)),"getVoiceArrFromServerAnswer",function(e){var t=e.serverAnswer,r=e.ossPrefix;return t.filter(function(e){return e.files&&!Object(ee.isEmpty)(e.files)}).map(function(e){var t=e.files.filter(function(e){return n.isVoiceUrl(e)});if(!Object(ee.isEmpty)(t)){var a=t.map(function(e,t){return{fileKey:e,name:"音频".concat(t+1),url:"".concat(r).concat(e)}});return{questionId:e.questionId,recordsList:a}}}).filter(function(e){return e})}),A()(T()(T()(n)),"isVoiceUrl",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(".");return"mp3"===e[e.length-1]}),A()(T()(T()(n)),"mergedCacheAnswer",function(e,t){var n=t.map(function(e){return e.id}),r=e.filter(function(e){return n.includes(e.questionId)})||[],i=r.map(function(e){return e.questionId})||[];return t.map(function(e){if(i.includes(e.id)){var t=r.filter(function(t){return t.questionId===e.id});return a()({questionId:e.id},t[0])}return{questionId:e.id,answer:[]}})}),A()(T()(T()(n)),"tick",function(){n.setState(function(e){return{leftTime:e.leftTime-1}})}),A()(T()(T()(n)),"afterSubmitPaper",function(){n.setState({isSureSubmitDialogShow:!1}),n.submitTimer&&clearTimeout(n.submitTimer),n.showToast(),n.initPageDetail()}),A()(T()(T()(n)),"showToast",function(){n.setState({isShowSuccessToast:!0}),n.toastTimer=setTimeout(function(){n.setState({isShowSuccessToast:!1})},2e3)}),A()(T()(T()(n)),"initPageDetail",function(){n.setState({currentPage:0}),n.listRef.current.scrollTop=0}),A()(T()(T()(n)),"topTipsShow",function(e){n.topTipsTimer&&clearTimeout(n.topTipsTimer),n.setState({isTopTipsShow:!0,topTipsText:e}),n.topTipsTimer=setTimeout(function(){n.setState({isTopTipsShow:!1})},3e3)}),A()(T()(T()(n)),"getAnswerSheetStatus",function(e){var t=e.subQuestions,r=e.answerCache,a=t.map(function(e){return e.id});return(n.formatServerAnswer(r).filter(function(e){return a.includes(e.questionId)})||[]).map(function(e){if(0===t.find(function(t){return t.id===e.questionId}).type||!Object(ee.isEmpty)(e.answer)||e.files&&!Object(ee.isEmpty)(e.files))return{questionId:e.questionId,isAnswered:1}}).filter(function(e){return e})}),A()(T()(T()(n)),"calculateAnsweredNum",function(){var e=n.state,t=e.studentAnswer,r=e.shortQuestionsFiles,a=e.recordsUrlArr,i=e.weixinRecord,o=n.props,c=o.papersQuestionsList,u=o.papersDetail,l=u.subQuestions,p=[];if(u.id&&l.length===t.length){var d=n.getAnswerSheetStatus(u),m=l.map(function(e){return e.id}),S=d.filter(function(e){return m.includes(e.questionId)});p=S,t&&!Object(ee.isEmpty)(t)&&t.map(function(e){var t=c&&c.find(function(t){return t.id===e.questionId}),o=!Object(ee.isEmpty)(r)&&r.find(function(t){return t.questionId===e.questionId}),u=!Object(ee.isEmpty)(a)&&a.find(function(t){return t.questionId===e.questionId}),l=!Object(ee.isEmpty)(i)&&i.find(function(t){return t.questionId===e.questionId}),d=!Object(ee.isEmpty)(e.answer),m=t||{},S=m.type,f=m.maxChosen,E=m.minChosen,h=p.filter(function(t){return t.questionId!==e.questionId}),_=p.some(function(t){return t.questionId===e.questionId});if([1,2,3].includes(S)){var I=!0;if(2===S)n.getExceedLimitTips(e.answer,E,f)&&(I=!1);!_&&d&&I&&(p=s()(h).concat([{questionId:e.questionId,isAnswered:1}])),!_||d&&I||(p=s()(h))}if(4===S){var g=t&&t.blankNum,w=!1;if(d)for(var T=0;T<e.answer.length;T++){var v=e.answer||[];("string"==typeof v[T]&&""===v[T].trim()||null===v[T]||void 0===v[T])&&(w=!0)}var A=d&&e.answer.length===g,y=d&&!w&&A;!_&&y&&(p=s()(h).concat([{questionId:e.questionId,isAnswered:1}])),_&&!y&&(p=s()(h))}if(5===S){var P="string"==typeof e.answer&&""!==e.answer.trim()||o&&!Object(ee.isEmpty)(o.imgList)||u&&!Object(ee.isEmpty)(u.recordsList)||l&&!Object(ee.isEmpty)(l.weixinRecordsList);!_&&P&&(p=s()(h).concat([{questionId:e.questionId,isAnswered:1}])),_&&!P&&(p=s()(h))}if(6===S){var O=t&&t.answerContent,b=d&&e.answer.length===O.length;!_&&b&&(p=s()(h).concat([{questionId:e.questionId,isAnswered:1}])),_&&!b&&(p=s()(h))}0===S&&(_||(p=s()(h).concat([{questionId:e.questionId,isAnswered:1}])))})}return{answerSheetStatus:p,answeredQuestionsNum:p.length}}),A()(T()(T()(n)),"loadMoreList",function(){var e=n.props.match.params.papersId,t=n.props.loadingMore,r=n.props.papersDetail.subQuestionNum,a=n.state,i=a.currentPage+1;a.isTopTipsShow||t||i>=r/5||n.props.actions.loadMorePapersQuestionsList({papersId:e,page:i,loadingMoreSuc:n.loadingMoreSuc})}),A()(T()(T()(n)),"loadingMoreSuc",function(){n.setState(function(e){return{currentPage:e.currentPage+1}})}),A()(T()(T()(n)),"scrollToAnchor",function(e){if(e){var t=document.getElementById(e);t&&t.scrollIntoView()}}),A()(T()(T()(n)),"handleGoClickedQuestions",function(){var e=l()(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isShowAnswerSheet:!1}),e.next=3,n.loadPreJumpQuestions(t);case 3:n.scrollToAnchor("Q-".concat(t));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),A()(T()(T()(n)),"loadPreJumpQuestions",function(){var e=l()(c.a.mark(function e(t){var r,a,i,s,o,u,l,p,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props,a=r.match,i=r.actions,s=a.params.papersId,o=n.state.currentPage,!(t/5>o+1)){e.next=27;break}u=o,i.setLoadingStatusTrue(),l=o+1;case 7:if(!(l<t/5)){e.next=25;break}return e.prev=8,e.next=11,Object(G.e)({papersId:s,page:l});case 11:return p=e.sent,e.next=14,i.loadMorePapersQuestionsListSuccess(p);case 14:u=l,e.next=22;break;case 17:e.prev=17,e.t0=e.catch(8),d="数据加载失败",e.t0.response&&(d=e.t0.response.message),n.topTipsShow(d);case 22:l++,e.next=7;break;case 25:i.setLoadingStatusFalse(),n.setState({currentPage:u});case 27:case"end":return e.stop()}},e,this,[[8,17]])}));return function(t){return e.apply(this,arguments)}}()),A()(T()(T()(n)),"handleAnswerSheetClose",function(){n.setState({isShowAnswerSheet:!1})}),A()(T()(T()(n)),"submitPapers",function(){var e=n.props.match.params,t=e.courseId,r=e.papersId,a=n.formatSubmitAnswer(),i={courseId:t,papersId:r,answer:n.formatArrToObj(a)};n.props.actions.submitPapersAnswer(i),n.listRef.current.scrollTop=0}),A()(T()(T()(n)),"mergeRecordsData",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=t.map(function(e){var t=e.imgList.map(function(e){return e.fileKey});return{questionId:e.questionId,fileKeyArr:t}}),o=n.map(function(e){var t=e.recordsList.map(function(e){return e.fileKey});return{questionId:e.questionId,fileKeyArr:t}}),c=r.map(function(e){var t=e.weixinRecordsList.map(function(e){return e.url});return{questionId:e.questionId,fileKeyArr:t}});return e.map(function(e){var t=i.find(function(t){return t.questionId===e.questionId}),n=o.find(function(t){return t.questionId===e.questionId}),r=c.find(function(t){return t.questionId===e.questionId}),u=e;return Object(ee.isEmpty)(t)||(u=a()({},u,{files:u.files?s()(u.files).concat(s()(t.fileKeyArr)):t.fileKeyArr})),Object(ee.isEmpty)(n)||(u=a()({},u,{files:u.files?s()(u.files).concat(s()(n.fileKeyArr)):n.fileKeyArr})),Object(ee.isEmpty)(r)||(u=a()({},u,{audio:u.audio?s()(u.audio).concat(s()(r.fileKeyArr)):r.fileKeyArr})),u})}),A()(T()(T()(n)),"onChoiceItemClick",function(e,t,r){var i=n.props,o=i.papersDetail,c=i.papersQuestionsList,u=o.isAnswered,l=o.status,p=n.props.query.isWrongQuesPage,d=c.find(function(e){return e.id===t}),m=d.type,S=d.minChosen,f=d.maxChosen,E=n.state.studentAnswer,h=Object(ee.cloneDeep)(E);if(!(u||2===l||p||r)){if(1===m||3===m){var _=h.map(function(n){return n.questionId===t?a()({},n,{answer:[{index:e}]}):n});n.setState({studentAnswer:_})}if(2===m){var I=h.map(function(r){if(r.questionId===t){var i="";return i=r.answer&&r.answer.some(function(t){return t.index===e})?r.answer.filter(function(t){return t.index!==e}):s()(r.answer).concat([{index:e}]),n.judgeChoiceNumRight(i,S,f),a()({},r,{answer:i})}return r});n.setState({studentAnswer:I})}}}),A()(T()(T()(n)),"choiceBlankChange",function(e,t,r){var i=n.state.studentAnswer,o=n.props.papersQuestionsList.find(function(e){return e.id===r}).type,c=e.target.value,u=Object(ee.cloneDeep)(i),l=[],p=u.filter(function(e){return e.questionId===r})||[],d=!Object(ee.isEmpty)(p)&&p[0].answer.filter(function(e){return e.index!==t})||[];2===o&&(l=c&&""!==c.trim()?s()(d).concat([{index:t,content:c}]):d),1===o&&c&&""!==c.trim()&&(l=[{index:t,content:c}]);var m=u.map(function(e){return e.questionId===r?a()({},e,{answer:l}):e});n.setState({studentAnswer:m})}),A()(T()(T()(n)),"judgeChoiceNumRight",function(e,t,r){var a=n.getExceedLimitTips(e,t,r);a&&n.topTipsShow(a)}),A()(T()(T()(n)),"getExceedLimitTips",function(e,t,n){var r=e.length<t,a=e.length>n,i="";return n&&!t&&a&&(i="此多选题最多能选".concat(n,"项")),t&&!n&&r&&(i="此多选题最少选择".concat(t,"项")),t&&n&&(r||a)&&(i="此多选题最少选择".concat(t,"项, 最多选择").concat(n,"项"),t===n&&(i="此多选题需选且仅能选".concat(t,"项"))),i}),A()(T()(T()(n)),"onFillBlankChange",function(e,t,r){var i=n.state.studentAnswer,s=Object(ee.cloneDeep)(i),o=e.target.value,c=s.map(function(e){if(e.questionId===r){var n=e.answer;return n[t]=o,a()({},e,{answer:n})}return e});n.setState({studentAnswer:c})}),A()(T()(T()(n)),"onSortItemClick",function(e,t){var r=n.state.studentAnswer,i=Object(ee.cloneDeep)(r).map(function(n){if(n.questionId===t){var r=n.answer;return r.includes(e)?n:a()({},n,{answer:s()(r).concat([e])})}return n});n.setState({studentAnswer:i})}),A()(T()(T()(n)),"resetSort",function(e){var t=n.state.studentAnswer,r=Object(ee.cloneDeep)(t).map(function(t){return t.questionId===e?a()({},t,{answer:[]}):t});n.setState({studentAnswer:r})}),A()(T()(T()(n)),"shortQuestionsInpChange",function(e,t){var r=n.state.studentAnswer,i=Object(ee.cloneDeep)(r),s=e.target.value,o=i.map(function(e){return e.questionId===t?a()({},e,{answer:s}):e});n.setState({studentAnswer:o})}),A()(T()(T()(n)),"uploadToOss",function(){var e=l()(c.a.mark(function e(t,r,a){var i,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=1==a?"image/png":"audio/mp3",s=t,1!==a){e.next=7;break}return s=t.nativeFile,e.next=6,Object(de.a)(s);case 6:s=e.sent;case 7:try{pe.a.uploadFile(s,i).then(function(e){var t=e.link,i=e.host;1===a&&n.afterOssUploadImg(r,t,i),2===a&&n.afterOssUploadRecord(r,t,i,s.name)})}catch(e){console.log(e)}case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()),A()(T()(T()(n)),"shortQuestionsUploaderFile",function(e,t,r){n.setState({uploadImageLoading:!0}),n.uploadToOss(e,r,1)}),A()(T()(T()(n)),"uploaderRecordFile",function(e,t){n.setState({uploadImageLoading:!0}),n.uploadToOss(e,t,2)}),A()(T()(T()(n)),"afterOssUploadImg",function(e,t,r){var i=n.state.shortQuestionsFiles,o=[],c={url:"".concat(r,"/").concat(t),fileKey:t},u=i.find(function(t){return t.questionId===e});o=Object(ee.isEmpty)(u)?s()(i).concat([{questionId:e,imgList:[c]}]):i.map(function(t){return t.questionId===e?a()({},t,{imgList:t.imgList?s()(t.imgList).concat([c]):[c]}):t}),n.setState({shortQuestionsFiles:o,uploadImageLoading:!1})}),A()(T()(T()(n)),"deleteQuestionsFile",function(e,t,r){var i=n.state.shortQuestionsFiles.map(function(e){if(e&&e.questionId===r){var n=e.imgList.filter(function(e,n){return n!==t});return a()({},e,{imgList:n})}return e});n.setState({shortQuestionsFiles:i})}),A()(T()(T()(n)),"afterOssUploadRecord",function(e,t,r,i){var o=n.state.recordsUrlArr,c=[],u={url:"".concat(r,"/").concat(t),name:i,fileKey:t},l=o.find(function(t){return t.questionId===e});c=Object(ee.isEmpty)(l)?s()(o).concat([{questionId:e,recordsList:[u]}]):o.map(function(t){return t.questionId===e?a()({},t,{recordsList:t.recordsList?s()(t.recordsList).concat([u]):[u]}):t}),n.setState({uploadImageLoading:!1,recordsUrlArr:c})}),A()(T()(T()(n)),"delRecordFile",function(e,t){var r=n.state.recordsUrlArr,i=Object(ee.cloneDeep)(r).map(function(n){if(n.questionId===t){var r=n.recordsList.filter(function(t,n){return n!==e});return a()({},n,{recordsList:r})}return n});n.setState({recordsUrlArr:i})}),A()(T()(T()(n)),"saveWeixinRecordFile",function(e,t){var r=n.state.weixinRecord,i=e.url,o=e.name,c=e.key,u=Object(ee.cloneDeep)(r),l=u.find(function(e){return e.questionId===t}),p=[],d={url:i,name:o,fileKey:c};p=Object(ee.isEmpty)(l)?s()(u).concat([{questionId:t,weixinRecordsList:[d]}]):u.map(function(e){return e.questionId===t?a()({},e,{weixinRecordsList:e.weixinRecordsList?s()(e.weixinRecordsList).concat([d]):[d]}):e}),n.setState({weixinRecord:p})}),A()(T()(T()(n)),"delWeixinRecordFile",function(e,t){var r=n.state.weixinRecord,i=Object(ee.cloneDeep)(r).map(function(n){if(n.questionId===t){var r=n.weixinRecordsList.filter(function(t,n){return n!==e});return a()({},n,{weixinRecordsList:r})}return n});n.setState({weixinRecord:i})}),A()(T()(T()(n)),"openSureSubmitDialog",function(){var e=n.calculateAnsweredNum().answeredQuestionsNum,t=n.props.papersDetail.subQuestionNum,r=n.props.isRecording;if(e===t)if(r){n.topTipsShow("正在录音中，请停止后提交")}else n.setState({isSureSubmitDialogShow:!0})}),A()(T()(T()(n)),"hideSureSubmitDialog",function(){n.setState({isSureSubmitDialogShow:!1})}),A()(T()(T()(n)),"refreshAnswer",function(){var e=n.props.match.params.papersId,t={papersId:e,page:0};n.setState({currentPage:0}),n.props.actions.getPapersDetail(e),n.props.actions.getPapersQuestionsList(t)}),A()(T()(T()(n)),"getLeftTimeText",function(){var e=n.state.leftTime,t="";return e&&e>0&&(t=Object(me.a)(1e3*e),e<60&&(t="".concat(Object(me.a)(1e3*e),"s"))),t}),A()(T()(T()(n)),"getDialogText",function(){var e=n.state.leftTime;return e&&e>0?"你已完成全部答题, 离交卷还有".concat(Object(me.a)(1e3*e),"，你可以再检查一下"):"你已完成全部答题, 你可以再检查一下"}),A()(T()(T()(n)),"handleFilePreView",function(e,t){"mp3"!==t?n.setState({previewIframe:e}):n.previewVoice(e)}),A()(T()(T()(n)),"previewVoice",function(e){n.setState({audioPlayerShow:!0,previewVoiceUrl:e})}),A()(T()(T()(n)),"closeAudioPlayer",function(e){n.setState({audioPlayerShow:!1}),e&&n.setState({previewVoiceUrl:""})}),A()(T()(T()(n)),"renderSubmitBtnGroup",function(){var e=n.state,t=e.leftTime,r=e.isKeyBordShow,a=n.props.papersDetail,i=a.subQuestionNum,s=n.props.query.isWrongQuesPage,o=n.calculateAnsweredNum().answeredQuestionsNum,c=n.getLeftTimeText(),u="提交 ( ".concat(o," / ").concat(i," )");return 0===a.isAnswered&&(1===a.status||3===a.status)&&!s?P.a.createElement("div",{className:fe.a.btnGroup,style:r?{position:"static"}:{}},P.a.createElement("div",{className:fe.a.timeBtn},!!t&&t>0&&[P.a.createElement("i",{className:fe.a.alarmIcon,style:{backgroundImage:"url(".concat(Ie,")")},key:1}),P.a.createElement("div",{key:2},c)]),P.a.createElement("button",{className:fe.a.submitBtn,style:i===o?{backgroundColor:"#32A999"}:{},onClick:n.openSureSubmitDialog},3===a.status?P.a.createElement("span",null,u," ",P.a.createElement("span",{style:{color:"#E42F45"}},"(已超时)")):P.a.createElement("span",null,u))):P.a.createElement("button",{className:fe.a.refreshBtn,onClick:n.refreshAnswer},P.a.createElement("i",{style:{backgroundImage:"url(".concat(_e,")")},className:fe.a.refreshIcon}),P.a.createElement("div",null,"刷新"))}),n}return g()(t,e),S()(t,[{key:"componentWillMount",value:function(){this.listRef=P.a.createRef(),this.initialClientHeight=0}},{key:"componentWillReceiveProps",value:function(e){var t=e.papersDetail;!this.props.papersDetail.id&&t.id&&(this.setInitStudentAnswer(t),this.isCanAnswer(t)&&this.submitTick()),this.props.papersDetail.timingClose&&this.props.papersDetail.timingClose===t.timingClose||this.setState({leftTime:e.papersDetail.timingClose})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.papersId,n={papersId:t,page:0};this.submitTimer=null,this.firstExcuteSubmitTick=!0,this.firstSubmit=!0,this.props.actions.getPapersDetail(t),this.props.actions.getPapersQuestionsList(n),this.scrollMethod(),window.addEventListener("resize",this.resize),this.eventEmitter=q.a.addListener("afterSubmitPaper",this.afterSubmitPaper),q.a.addListener("showTopTips",this.topTipsShow),this.timerID=setInterval(function(){return e.tick()},1e3),this.initialClientHeight=document.documentElement.clientHeight||document.body.clientHeight}},{key:"componentDidUpdate",value:function(e,t){t.leftTime<-5&&this.timerID&&clearInterval(this.timerID),t.leftTime>0&&0===this.state.leftTime&&this.props.actions.changePaperDetailOpenStatus(),300===this.state.leftTime&&this.topTipsShow("离交卷时间还剩5分钟"),600===this.state.leftTime&&this.topTipsShow("离交卷时间还剩10分钟")}},{key:"componentWillUnmount",value:function(){this.toastTimer&&clearTimeout(this.toastTimer),this.topTipsTimer&&clearTimeout(this.topTipsTimer),q.a.removeListener("afterSubmitPaper",this.afterSubmitPaper),q.a.removeListener("showTopTips",this.topTipsShow),clearInterval(this.timerID),this.submitTimer&&clearTimeout(this.submitTimer),window.removeEventListener("resize",this.resize),this.isCanAnswer(this.props.papersDetail)&&this.autoSubmitChangeAnswer(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.papersDetail,r=void 0===n?{}:n,i=t.papersQuestionsList,s=t.loadingMore,o=t.submitLoading,c=t.loadingData,u=t.isRecording,l=r.code,p=r.subQuestionNum,d=r.difficulty,m=r.subQuestions,S=this.props.query.isWrongQuesPage,f=this.state,E=f.isShowAnswerSheet,h=f.studentAnswer,_=f.shortQuestionsFiles,I=f.isSureSubmitDialogShow,g=f.isShowSuccessToast,w=f.currentQuestionsNum,T=f.uploadImageLoading,v=f.isTopTipsShow,A=f.topTipsText,y=f.recordsUrlArr,O=f.weixinRecord,b=f.previewIframe,L=f.previewVoiceUrl,C=f.audioPlayerShow,R=this.calculateAnsweredNum(),N=R.answeredQuestionsNum,U=R.answerSheetStatus,x={answerOpen:r.answerOpen,isAnswered:r.isAnswered,reviewOpen:r.reviewOpen,status:r.status},D={title:"你确定要提交吗？",buttons:[{type:"default",label:"再检查一下",onClick:this.hideSureSubmitDialog.bind(this)},{type:"primary",label:"确认提交",onClick:this.submitPapers.bind(this)}]},Q=this.getDialogText();return P.a.createElement("div",{style:{position:"relative",height:"100vh"}},P.a.createElement("div",{className:fe.a.header},P.a.createElement("div",{className:fe.a.leftWrap},P.a.createElement("div",{className:fe.a.title},"组卷"),P.a.createElement("div",{style:{margin:"0 8px"}},l),P.a.createElement("div",{className:fe.a.difficultStarWrap},d&&Array.from({length:d},function(e,t){return P.a.createElement("i",{style:{backgroundImage:"url(".concat(Ee,")")},className:fe.a.difficultStar,key:t})}))),P.a.createElement("button",{className:fe.a.rightWrap,onClick:function(){return e.setState({isShowAnswerSheet:!0})}},P.a.createElement("i",{style:{backgroundImage:"url(".concat(he,")")},className:fe.a.navigationIcon}),P.a.createElement("div",null,"".concat(w," / ").concat(p||1)))),P.a.createElement("div",{className:fe.a.listWrap,ref:this.listRef},i&&i.map(function(t,n){var r=h.find(function(e){return e.questionId===t.id}),i=_.find(function(e){return e.questionId===t.id}),s=y.find(function(e){return e.questionId===t.id}),o=O.find(function(e){return e.questionId===t.id});return P.a.createElement(re.a,{key:t.id,questionsDetail:a()({},t,x,{paperQuesIsAnswered:t.isAnswered}),id:"Q-".concat(n+1),onChoiceItemClick:e.onChoiceItemClick,activeChocieItem:r&&r.answer,choiceBlankChange:e.choiceBlankChange,inpVal:r&&r.answer,onFillBlankChange:e.onFillBlankChange,shortQuestionsInp:r&&r.answer,shortQuestionsInpChange:e.shortQuestionsInpChange,shortQuestionsFiles:i?i.imgList:[],shortQuestionsUploaderFile:e.shortQuestionsUploaderFile,deleteQuestionsFile:e.deleteQuestionsFile,isPaperQuestionsPage:!0,onSortItemClick:e.onSortItemClick,sortChoiceArr:r&&r.answer,resetSort:function(){return e.resetSort(t.id)},isWrongQuesPage:S,uploaderRecordFile:e.uploaderRecordFile,delRecordFile:e.delRecordFile,saveWeixinRecordFile:e.saveWeixinRecordFile,delWeixinRecordFile:e.delWeixinRecordFile,recordsUrlArr:s&&s.recordsList,weixinRecord:o&&o.weixinRecordsList,isRecording:u,handleFilePreView:e.handleFilePreView})}),s&&P.a.createElement(te.LoadMore,{loading:!0},"Loading")),this.renderSubmitBtnGroup(),E&&P.a.createElement(le,{closeAnswerSheet:this.handleAnswerSheetClose,goClickedQuestions:this.handleGoClickedQuestions,subQuestionNum:p,answeredQuestionsNum:N,isAnswered:r.isAnswered,answerSheetStatus:U,subQuestions:m,answerOpen:r.answerOpen}),!!b&&P.a.createElement("div",{className:fe.a.previewIframe},P.a.createElement("iframe",{src:b,frameBorder:"0",title:"iframe"},"您的浏览器暂不支持iframe，请升级后进行浏览。"),P.a.createElement("button",{onClick:function(){return e.setState({previewIframe:""})}},"关闭预览")),L&&P.a.createElement(ne.a,{audioPlayerShow:C,closeAudioPlayer:this.closeAudioPlayer,playerUrl:L}),P.a.createElement(te.Toast,{icon:"loading",show:o},"提交中"),P.a.createElement(te.Toast,{icon:"loading",show:T},"上传中"),P.a.createElement(te.Toast,{icon:"loading",show:c},"加载中"),P.a.createElement(te.Toast,{icon:"success-no-circle",show:g},"提交成功"),P.a.createElement(te.Toptips,{type:"warn",show:v},A),P.a.createElement(te.Dialog,{type:"ios",title:D.title,buttons:D.buttons,show:I,className:fe.a.sureDialog},Q))}}]),t}(y.PureComponent);A()(ve,"defaultProps",{papersDetail:{},papersQuestionsList:[]});var Ae=x(),ye=Object(O.b)(Ae,function(e){var t=a()({},R);return{actions:Object(b.b)(t,e)}});t.default=Object(b.d)(ge,we,ye)(ve)},240:function(e,t,n){var r=n(252),a=n(253),i=n(254);e.exports=function(e){return r(e)||a(e)||i()}},252:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},253:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},254:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},271:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c});var r=n(15),a=n.n(r),i=n(23),s=n.n(i);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5?arguments[5]:void 0,s="";if(0===t&&0===n&&0===r)return s;for(var o=e;o>0;o--){var c=Math.floor(94*Math.random()+33);0===t&&c>=48&&c<=57||0===n&&(c>=65&&c<=90||c>=97&&c<=122)||0===r&&(c>=33&&c<=47||c>=58&&c<=64||c>=91&&c<=96||c>=123&&c<=127)?o++:s+=String.fromCharCode(c)}return 0===a&&(s=0===i?s.toUpperCase():s.toLowerCase()),s}var c=function(){var e=s()(a.a.mark(function e(t){var n,r,i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.size)/1024>500)){e.next=10;break}return r=.8,n/1024>1500&&(r=.6),n/1024>3500&&(r=.4),n/1024>5e3&&(r=.2),e.next=8,u(t,r);case 8:return i=e.sent,e.abrupt("return",i);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=s()(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t,n).then(function(e){return e});case 2:return r=e.sent,e.abrupt("return",r||t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),l=function(e,t){return new Promise(function(n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){var e=this.result,r=new Image;r.src=e,r.onload=function(){p(r,t,function(e){var t=d(e);n(t)})}}})},p=function(e,t,n){var r=document.createElement("canvas"),a=r.getContext("2d"),i=e.width,s=e.height,o=document.createAttribute("width");o.nodeValue=i;var c=document.createAttribute("height");c.nodeValue=s,r.setAttributeNode(o),r.setAttributeNode(c),a.drawImage(e,0,0,i,s);var u=r.toDataURL("image/jpeg",t);n&&n(u)},d=function(e){try{for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),a=r.length,i=new Uint8Array(a);a--;)i[a]=r.charCodeAt(a);return new Blob([i],{type:n})}catch(e){return null}}},273:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={GET_COURSES_DETAIL:"GET_COURSES_DETAIL",GET_COURSES_DETAIL_SUCCESS:"GET_COURSES_DETAIL_SUCCESS",GET_COURSES_DETAIL_FAIL:"GET_COURSES_DETAIL_FAIL",GET_QUESTIONS_LIST:"GET_QUESTIONS_LIST",GET_QUESTIONS_LIST_SUCCESS:"GET_QUESTIONS_LIST_SUCCESS",GET_QUESTIONS_LIST_FAIL:"GET_QUESTIONS_LIST_FAIL",LOAD_MORE_QUESTIONS_LIST:"LOAD_MORE_QUESTIONS_LIST",LOAD_MORE_QUESTIONS_LIST_SUCCESS:"LOAD_MORE_QUESTIONS_LIST_SUCCESS",LOAD_MORE_QUESTIONS_LIST_FAIL:"LOAD_MORE_QUESTIONS_LIST_FAIL",GET_PAPERS_LIST:"GET_PAPERS_LIST",GET_PAPERS_LIST_SUCCESS:"GET_PAPERS_LIST_SUCCESS",GET_PAPERS_LIST_FAIL:"GET_PAPERS_LIST_FAIL",LOAD_MORE_PAPERS_LIST:"LOAD_MORE_PAPERS_LIST",LOAD_MORE_PAPERS_LIST_SUCCESS:"LOAD_MORE_PAPERS_LIST_SUCCESS",LOAD_MORE_PAPERS_LIST_FAIL:"LOAD_MORE_PAPERS_LIST_FAIL",GET_QUESTIONS_DETAIL:"GET_QUESTIONS_DETAIL",GET_QUESTIONS_DETAIL_SUCCESS:"GET_QUESTIONS_DETAIL_SUCCESS",GET_QUESTIONS_DETAIL_FAIL:"GET_QUESTIONS_DETAIL_FAIL",GET_PAPERS_DETAIL:"GET_PAPERS_DETAIL",GET_PAPERS_DETAIL_SUCCESS:"GET_PAPERS_DETAIL_SUCCESS",GET_PAPERS_DETAIL_FAIL:"GET_PAPERS_DETAIL_FAIL",GET_PAPERS_QUESTIONS_LIST:"GET_PAPERS_QUESTIONS_LIST",GET_PAPERS_QUESTIONS_LIST_SUCCESS:"GET_PAPERS_QUESTIONS_LIST_SUCCESS",GET_PAPERS_QUESTIONS_LIST_FAIL:"GET_PAPERS_QUESTIONS_LIST_FAIL",LOAD_MORE_PAPERS_QUESTIONS_LIST:"LOAD_MORE_PAPERS_QUESTIONS_LIST",LOAD_MORE_PAPERS_QUESTIONS_LIST_SUCCESS:"LOAD_MORE_PAPERS_QUESTIONS_LIST_SUCCESS",LOAD_MORE_PAPERS_QUESTIONS_LIST_FAIL:"LOAD_MORE_PAPERS_QUESTIONS_LIST_FAIL",GET_CHAPTER_LIST:"GET_CHAPTER_LIST",GET_CHAPTER_LIST_SUCCESS:"GET_CHAPTER_LIST_SUCCESS",GET_CHAPTER_LIST_FAIL:"GET_CHAPTER_LIST_FAIL",SUBMIT_QUESTIONS_ANSWER:"SUBMIT_QUESTIONS_ANSWER",SUBMIT_QUESTIONS_ANSWER_SUCCESS:"SUBMIT_QUESTIONS_ANSWER_SUCCESS",SUBMIT_QUESTIONS_ANSWER_FAIL:"SUBMIT_QUESTIONS_ANSWER_FAIL",SUBMIT_PAPERS_ANSWER:"SUBMIT_PAPERS_ANSWER",SUBMIT_PAPERS_ANSWER_SUCCESS:"SUBMIT_PAPERS_ANSWER_SUCCESS",SUBMIT_PAPERS_ANSWER_FAIL:"SUBMIT_PAPERS_ANSWER_FAIL",INIT_ANSWER_LIST:"INIT_ANSWER_LIST",CHANGE_QUESTIONS_TYPE:"CHANGE_QUESTIONS_TYPE",CHANGE_FILTER_CONDITION:"CHANGE_FILTER_CONDITION",CHANGE_LIST_OPEN_STATUS:"CHANGE_LIST_OPEN_STATUS",CHANGE_DETAIL_OPEN_STATUS:"CHANGE_DETAIL_OPEN_STATUS",CHANGE_PAPER_DETAIL_OPEN_STATUS:"CHANGE_PAPER_DETAIL_OPEN_STATUS",SET_LOADING_STATUS_TRUE:"SET_LOADING_STATUS_TRUE",SET_LOADING_STATUS_FALSE:"SET_LOADING_STATUS_FALSE",UPLOAD_RECORD:"UPLOAD_RECORD",UPLOAD_RECORD_SUCCESS:"UPLOAD_RECORD_SUCCESS",UPLOAD_RECORD_FAIL:"UPLOAD_RECORD_FAIL",CHANGE_RECORDING_STATUS:"CHANGE_RECORDING_STATUS"}},281:function(e,t,n){"use strict";n.r(t),n.d(t,"getCourseDetail",function(){return a}),n.d(t,"getCourseDetailSuccess",function(){return i}),n.d(t,"getCourseDetailFail",function(){return s}),n.d(t,"getQuestionsList",function(){return o}),n.d(t,"getQuestionsListSuccess",function(){return c}),n.d(t,"getQuestionsListFail",function(){return u}),n.d(t,"loadMoreQuestionsList",function(){return l}),n.d(t,"loadMoreQuestionsListSuccess",function(){return p}),n.d(t,"loadMoreQuestionsListFail",function(){return d}),n.d(t,"getPapersList",function(){return m}),n.d(t,"getPapersListSuccess",function(){return S}),n.d(t,"getPapersListFail",function(){return f}),n.d(t,"loadMorePapersList",function(){return E}),n.d(t,"loadMorePapersListSuccess",function(){return h}),n.d(t,"loadMorePapersListFail",function(){return _}),n.d(t,"getQuestionsDetail",function(){return I}),n.d(t,"getQuestionsDetailSuccess",function(){return g}),n.d(t,"getQuestionsDetailFail",function(){return w}),n.d(t,"getPapersDetail",function(){return T}),n.d(t,"getPapersDetailSuccess",function(){return v}),n.d(t,"getPapersDetailFail",function(){return A}),n.d(t,"getPapersQuestionsList",function(){return y}),n.d(t,"getPapersQuestionsListSuccess",function(){return P}),n.d(t,"getPapersQuestionsListFail",function(){return O}),n.d(t,"loadMorePapersQuestionsList",function(){return b}),n.d(t,"loadMorePapersQuestionsListSuccess",function(){return L}),n.d(t,"loadMorePapersQuestionsListFail",function(){return C}),n.d(t,"setLoadingStatusTrue",function(){return R}),n.d(t,"setLoadingStatusFalse",function(){return N}),n.d(t,"getChapterList",function(){return U}),n.d(t,"getChapterListSuccess",function(){return x}),n.d(t,"getChapterListFail",function(){return D}),n.d(t,"submitQuestionsAnswer",function(){return Q}),n.d(t,"submitQuestionsAnswerSuccess",function(){return k}),n.d(t,"submitQuestionsAnswerFail",function(){return F}),n.d(t,"submitPapersAnswer",function(){return j}),n.d(t,"submitPapersAnswerSuccess",function(){return q}),n.d(t,"submitPapersAnswerFail",function(){return G}),n.d(t,"initAnswerList",function(){return W}),n.d(t,"changeQuestionsType",function(){return B}),n.d(t,"changeFilterCondition",function(){return M}),n.d(t,"changeListOpenStatus",function(){return V}),n.d(t,"changeDetailOpenStatus",function(){return H}),n.d(t,"changePaperDetailOpenStatus",function(){return z}),n.d(t,"uploadRecord",function(){return J}),n.d(t,"uploadRecordSuccess",function(){return K}),n.d(t,"uploadRecordFail",function(){return Y}),n.d(t,"changeRecordingStatus",function(){return Z});var r=n(273);function a(){return{type:r.a.GET_COURSES_DETAIL}}function i(e){return{type:r.a.GET_COURSES_DETAIL_SUCCESS,payload:e}}function s(e){return{type:r.a.GET_COURSES_DETAIL_FAIL,err:e}}function o(e){return{type:r.a.GET_QUESTIONS_LIST,payload:e}}function c(e){return{type:r.a.GET_QUESTIONS_LIST_SUCCESS,payload:e}}function u(e){return{type:r.a.GET_QUESTIONS_LIST_FAIL,err:e}}function l(e){return{type:r.a.LOAD_MORE_QUESTIONS_LIST,payload:e}}function p(e){return{type:r.a.LOAD_MORE_QUESTIONS_LIST_SUCCESS,payload:e}}function d(e){return{type:r.a.LOAD_MORE_QUESTIONS_LIST_FAIL,err:e}}function m(e){return{type:r.a.GET_PAPERS_LIST,payload:e}}function S(e){return{type:r.a.GET_PAPERS_LIST_SUCCESS,payload:e}}function f(e){return{type:r.a.GET_PAPERS_LIST_FAIL,err:e}}function E(e){return{type:r.a.LOAD_MORE_PAPERS_LIST,payload:e}}function h(e){return{type:r.a.LOAD_MORE_PAPERS_LIST_SUCCESS,payload:e}}function _(e){return{type:r.a.LOAD_MORE_PAPERS_LIST_FAIL,err:e}}function I(e){return{type:r.a.GET_QUESTIONS_DETAIL,questionId:e}}function g(e){return{type:r.a.GET_QUESTIONS_DETAIL_SUCCESS,payload:e}}function w(e){return{type:r.a.GET_QUESTIONS_DETAIL_FAIL,err:e}}function T(e){return{type:r.a.GET_PAPERS_DETAIL,paperId:e}}function v(e){return{type:r.a.GET_PAPERS_DETAIL_SUCCESS,payload:e}}function A(e){return{type:r.a.GET_PAPERS_DETAIL_FAIL,err:e}}function y(e){return{type:r.a.GET_PAPERS_QUESTIONS_LIST,payload:e}}function P(e){return{type:r.a.GET_PAPERS_QUESTIONS_LIST_SUCCESS,payload:e}}function O(e){return{type:r.a.GET_PAPERS_QUESTIONS_LIST_FAIL,err:e}}function b(e){return{type:r.a.LOAD_MORE_PAPERS_QUESTIONS_LIST,payload:e}}function L(e){return{type:r.a.LOAD_MORE_PAPERS_QUESTIONS_LIST_SUCCESS,payload:e}}function C(e){return{type:r.a.LOAD_MORE_PAPERS_QUESTIONS_LIST_FAIL,err:e}}function R(){return{type:r.a.SET_LOADING_STATUS_TRUE}}function N(){return{type:r.a.SET_LOADING_STATUS_FALSE}}function U(e){return{type:r.a.GET_CHAPTER_LIST,courseId:e}}function x(e){return{type:r.a.GET_CHAPTER_LIST_SUCCESS,payload:e}}function D(e){return{type:r.a.GET_CHAPTER_LIST_FAIL,err:e}}function Q(e){return{type:r.a.SUBMIT_QUESTIONS_ANSWER,payload:e}}function k(e){return{type:r.a.SUBMIT_QUESTIONS_ANSWER_SUCCESS,payload:e}}function F(e){return{type:r.a.SUBMIT_QUESTIONS_ANSWER_FAIL,err:e}}function j(e){return{type:r.a.SUBMIT_PAPERS_ANSWER,payload:e}}function q(e){return{type:r.a.SUBMIT_PAPERS_ANSWER_SUCCESS,payload:e}}function G(e){return{type:r.a.SUBMIT_PAPERS_ANSWER_FAIL,err:e}}function W(){return{type:r.a.INIT_ANSWER_LIST}}function B(e){return{type:r.a.CHANGE_QUESTIONS_TYPE,questionsType:e}}function M(e){return{type:r.a.CHANGE_FILTER_CONDITION,payload:e}}function V(e){return{type:r.a.CHANGE_LIST_OPEN_STATUS,payload:e}}function H(e){return{type:r.a.CHANGE_DETAIL_OPEN_STATUS,payload:e}}function z(e){return{type:r.a.CHANGE_PAPER_DETAIL_OPEN_STATUS,payload:e}}function J(e){return{type:r.a.UPLOAD_RECORD,payload:e}}function K(e){return{type:r.a.UPLOAD_RECORD_SUCCESS,payload:e}}function Y(e){return{type:r.a.UPLOAD_RECORD_FAIL,payload:e}}function Z(e){return{type:r.a.CHANGE_RECORDING_STATUS,payload:e}}},318:function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"g",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"f",function(){return I}),n.d(t,"c",function(){return w}),n.d(t,"e",function(){return v}),n.d(t,"a",function(){return y}),n.d(t,"j",function(){return O}),n.d(t,"i",function(){return L}),n.d(t,"k",function(){return R}),n.d(t,"h",function(){return U});var r=n(8),a=n.n(r),i=n(15),s=n.n(i),o=n(23),c=n.n(o),u=n(16),l=n(271),p=n(248),d=n.n(p);function m(){return S.apply(this,arguments)}function S(){return(S=c()(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/v3/students/courses",e.next=3,u.a.get("/v3/students/courses");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function f(e){return E.apply(this,arguments)}function E(){return(E=c()(s.a.mark(function e(t){var n,r,a,i,o,c,l,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.courseId,r=t.chapterId,a=t.isAnswered,i=t.isOpen,o=t.page,c=t.isCorrect,"/v3/students/questions",l={courseId:n,chapterId:r,isAnswered:a,isOpen:i,page:o,isCorrect:c},e.next=5,u.a.get("/v3/students/questions",l);case 5:return p=e.sent,e.abrupt("return",p);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function h(e){return _.apply(this,arguments)}function _(){return(_=c()(s.a.mark(function e(t){var n,r,a,i,o,c,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.courseId,r=t.chapterId,a=t.isAnswered,i=t.isOpen,o=t.page,"/v3/students/papers",c={courseId:n,chapterId:r,isAnswered:a,isOpen:i,page:o},e.next=5,u.a.get("/v3/students/papers",c);case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function I(e){return g.apply(this,arguments)}function g(){return(g=c()(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v3/students/questions/".concat(t),e.next=3,u.a.get(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function w(e){return T.apply(this,arguments)}function T(){return(T=c()(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v3/students/papers/".concat(t),e.next=3,u.a.get(n,null,{headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function v(e){return A.apply(this,arguments)}function A(){return(A=c()(s.a.mark(function e(t){var n,r,a,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.papersId,r=t.page,a="/v3/students/papers/".concat(n,"/questions?page=").concat(r),e.next=4,u.a.get(a,null,{headers:{"Content-Type":"application/json","Cache-Control":"no-cache"}});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function y(e){return P.apply(this,arguments)}function P(){return(P=c()(s.a.mark(function e(t){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v3/students/courses/".concat(t,"/chapters"),e.next=3,u.a.get(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function O(e){return b.apply(this,arguments)}function b(){return(b=c()(s.a.mark(function e(t){var n,r,a,i,o,c,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.courseId,r=t.questionsId,a=t.answer,i=t.files,o=t.audio,"/v3/students/answer/question",c={courseId:n,questionId:r,answer:a,files:i,audio:o},e.next=5,u.a.post("/v3/students/answer/question",c);case 5:return l=e.sent,e.abrupt("return",l);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function L(e){return C.apply(this,arguments)}function C(){return(C=c()(s.a.mark(function e(t){var n,r,a,i,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.courseId,r=t.papersId,a=t.answer,"/v3/students/answer/paper",i={courseId:n,paperId:r,answer:a},e.next=5,u.a.post("/v3/students/answer/paper",i);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return(N=c()(s.a.mark(function e(t){var n,r,i,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"/v1/transcode",n=Object(l.b)(5,1,1),r="录音".concat(d()().format("YYYYMMDDHHmmss")),i="".concat(n,"-").concat((new Date).getTime(),"-").concat(r),e.next=6,u.a.post("/v1/transcode",{mediaId:t,name:i});case 6:return o=e.sent,e.abrupt("return",a()({},o,{name:"".concat(r,".mp3"),type:"mp3",key:"".concat(i,".mp3")}));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function U(e){return x.apply(this,arguments)}function x(){return(x=c()(s.a.mark(function e(t){var n,r,a,i,o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.courseId,r=t.papersId,a=t.answer,i=t.isOnceAnswer,"/v3/students/answer/paper/temp",o={courseId:n,paperId:r,answer:a,isOnceAnswer:i},e.next=5,u.a.post("/v3/students/answer/paper/temp",o);case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}},389:function(e,t,n){"use strict";var r=n(46),a=n.n(r),i=n(47),s=n.n(i),o=n(48),c=n.n(o),u=n(49),l=n.n(u),p=n(50),d=n.n(p),m=n(89),S=n.n(m),f=n(33),E=n.n(f),h=n(1),_=n.n(h),I=(n(3),n(208)),g=n(212),w=n(359),T=n(255),v=n(390),A=n.n(v),y=Object(g.a)("aq_gray_star.png"),P=Object(g.a)("aq_alarm.svg"),O=Object(g.a)("aq_right_hook.svg"),b=Object(g.a)("aq_wrong_hook.svg"),L=Object(g.a)("aq_answered.svg"),C={0:{typeText:"阅读",bg:"#5F9F2F"},1:{typeText:"单选",bg:"#52D4B3"},2:{typeText:"多选",bg:"#00CCDE"},3:{typeText:"是非",bg:"#9B9B9B"},4:{typeText:"填空",bg:"#F3BA5D"},5:{typeText:"简答",bg:"#AB4FFB"},6:{typeText:"调序",bg:"#BD783B"}},R={0:{answerText:"未答",icon:"warn",color:"#E42F45"},1:{answerText:"已答",icon:"success",color:"#32A999"}},N=function(e){function t(){var e,n;a()(this,t);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=c()(this,(e=l()(t)).call.apply(e,[this].concat(i))),E()(S()(S()(n)),"state",{leftTime:n.props.timingClose?n.props.timingClose:0,previewIframe:""}),E()(S()(S()(n)),"tick",function(){n.setState(function(e){return{leftTime:e.leftTime-1}})}),n}return d()(t,e),s()(t,[{key:"componentDidMount",value:function(){var e=this;this.timerID=setInterval(function(){return e.tick()},1e3)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.timingClose;(!t||t&&e.timingClose!==this.props.timingClose)&&this.setState({leftTime:e.timingClose})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.id;t.leftTime<0&&this.timerID&&clearInterval(this.timerID),t.leftTime>0&&0===this.state.leftTime&&this.props.changeOpenStatus&&this.props.changeOpenStatus(n)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"render",value:function(){var e=this.props,t=e.type,n=void 0===t?0:t,r=e.code,a=e.status,i=e.content,s=e.isAnswered,o=void 0===s?0:s,c=e.paperQuesIsAnswered,u=e.isQuestionsListPage,l=e.isCorrect,p=e.answerOpen,d=e.isObjective,m=e.questionsType,S=e.difficulty,f=e.index,E=e.isPaperQuestionsPage,h=e.isWrongQuesPage,g=e.handleFilePreView,v=this.state.leftTime,N=C[n].typeText,U=C[n].bg;"papers"===m&&(U="#4A90E2");var x=R[o].answerText,D=R[o].color,Q="papers"===m?"组卷":N,k="",F="",j="",q="",G="",W=1===o&&1===p&&1===d;1!==a||h||E||(q="开启中",j="#E42F45"),2!==a&&3!==a||h||E||(q="已关闭",o&&!p&&(q="已关闭，暂未公布答案"),j="#999999"),W&&(k=l?"回答正确":"回答错误",F=l?"#5A9619":"#FF3228",G=l?O:b,u&&!h||(q=k,j=F)),E&&o&&0===c&&(q="未答",j="#FF3228");var B="";v&&v>0&&(B=Object(w.a)(1e3*v),v<60&&(B="".concat(Object(w.a)(1e3*v),"s")));var M=E?{borderTop:"3px solid ".concat(U)}:{};return _.a.createElement("div",{className:A.a.menuCardWrapper,style:M},_.a.createElement("div",{className:A.a.questionsTitlePart},_.a.createElement("div",{style:{display:"flex",alignItems:"center"}},_.a.createElement("div",{className:A.a.questionsType,style:{backgroundColor:U}},Q),f&&_.a.createElement("div",{style:{color:U,marginRight:"8px"}},f),""!==r&&_.a.createElement("div",{className:A.a.titleCode},r),_.a.createElement("div",{style:{display:"flex"}},S>0&&Array.from({length:S},function(e,t){return _.a.createElement("i",{style:{backgroundImage:"url(".concat(y,")")},className:A.a.difficultStar,key:t})}))),_.a.createElement("div",{style:{color:j}},q)),u?_.a.createElement("div",{className:A.a.questionsContent,dangerouslySetInnerHTML:{__html:i}}):_.a.createElement(T.a,{content:i,handleFilePreView:g}),u&&_.a.createElement("div",{className:A.a.answerStatus},_.a.createElement("div",{className:A.a.answerStatusIcon},o?_.a.createElement("i",{className:A.a.answeredIcon,style:{backgroundImage:"url(".concat(L,")")}}):_.a.createElement(I.Icon,{value:"warn",style:{fontSize:"13px"}}),_.a.createElement("div",{style:{color:D,marginTop:"4px"}},x)),W&&!h&&_.a.createElement("div",{style:{display:"flex",alignItems:"center"}},_.a.createElement("i",{className:A.a.resultIcon,style:{backgroundImage:"url(".concat(G,")")}}),_.a.createElement("div",{style:{color:F}},k)),!W&&!h&&!!v&&v>0&&_.a.createElement("div",{className:A.a.alarmWrap},_.a.createElement("i",{className:A.a.alarmIcon,style:{backgroundImage:"url(".concat(P,")")}}),_.a.createElement("div",null,B))))}}]),t}(h.PureComponent);N.defaultProps={},t.a=N},390:function(e,t,n){e.exports={menuCardWrapper:"_1tVWqI4-1Dj8SXnD7oQ9WP",questionsTitlePart:"_1zWNB_N5SnaxIUxqoa5sgQ",questionsType:"_2EVzkN28BBDa-klchtqcJC",titleCode:"_3S_Bf8MLCm-TY1dUsAyRBY",difficultStar:"_2sx0nd_HjmGTO3iwBLQrRa",openStatus:"_2eZRzxViyLpIw6T_Bu_Wi-",questionsContent:"yCoJ6LVldShJW4-QUQIzU",answerStatus:"_1dg8vAuC0sEw2pX_jU-Xys",answerStatusIcon:"_1qAAs7qGHtSBPDH2TpYL4S",alarmWrap:"_1zLQTNhSIpVpJAuUCj196y",alarmIcon:"_1z-hrq2zN3wp19MmzDsOJ4",resultIcon:"_2UEzOMMy4RwghXPI3E5FUT",answeredIcon:"YQeZcMppQIjZ2f9-jjvTC"}},463:function(e,t,n){e.exports={choiceItem:"_29hpjgQIouRrKP_wrCQ_j4",baseBtn:"_3SfXe4Pk9VIXxFGZ-UN2Pu",choiceBtn:"_2vXB94_f_xR88B9hfwp1aN",activeChoiceBtn:"_2IQQQia-dlMQD2yUaAcBBe",answeredChoiceBtn:"_1nsM4ePtqsd3ODmCJ3xJAk",otherChoiceBtn:"_3z4-DQQsb8C5SZC9S0xD4H",rightChoiceItem:"_3qrct44uFa3gR022CfhzmW",wrongChoiceItem:"_1EE77L4zSfqKMxj47h9dUa",iconStyle:"_29QKfG9V63SUWvTm3lgpyN",iconHook:"_2kpfpzNJ3-n9VGnJeIEMwN",rightIcon:"_3rkvj9myR5z12WNHzggGBP",wrongIcon:"gFluL-l_XxqjVuJX_mxnn"}},465:function(e,t,n){e.exports={inputWrapper:"dhiccbzLAlvLFEBjU5Y5R",fillIndex:"_3KRgdg7w63QyAhTDLl5_rx",rightFillAnswer:"_2-M5XUfSHJq5JqdLKR4ZI6",iconStyle:"_4YZNtbc6sIwhDOAVW5Sj_",iconHook:"Cw96wm101cLKMHVZCDppB",rightIcon:"_2p9CmqTRZeZJ9AYNwmZArp",wrongFillAnswer:"_2JgINQI42Baz6geL6my25p",wrongIcon:"_1Jl8dTkp6QYfidzpBIpNVH"}},467:function(e,t,n){e.exports={choiceItem:"_2hlLXY_yOCuJVhKeRz6d9s",baseBtn:"oQvyO93b6xKDPYtD8D1cB",answeredChoiceBtn:"MJcCSLFPXitTNsYP2ALMs",iconStyle:"_2OkDmLZrQBL6caSFzp0Erp",rightIcon:"_9WAPfP8vG9ej2gbNYpqWZ",wrongIcon:"_2rKw7Q7m-yJ0K2g-PwOe__"}},469:function(e,t,n){e.exports={cancelBtnStyle:"_3xdCMWEpJyx-qX-pplBgy1",voicePrview:"_3BryczfTy7K2aW_iR5q04w",voiceItem:"_1qixXAwW2-t8D-OsZIKOme",uploadVoiceWrap:"_1F6-9aqZAeklsy2w6FvZyY",uploadBtn:"_1rlAAJIcYvt00ncg6XB-A_",recordItem:"Wi6ttzzKubwxbYiNkX-3M",voiceItemName:"_14av2yP_YlnEFcKElVhjAN",voiceName:"_1KL-gHxmk10eQRl1glZf2K",delBtn:"_1-ualyPxphGTp6J_UDK_qO",recordTips:"_1pDJ1oGYfkAGYGaExL-vvV",recordLimitTips:"wPRIpze4jx_968F72GRcp"}},471:function(e,t,n){e.exports={title:"_1GQWsnyBYbY83qz0BeTKEv",choiceItem:"_1MRwG2KOMJ7jDDh8OLL3Az",inputWrapper:"_3Tpm-sMVSXsBtHTneP11Ld",baseBtn:"NiivPOAGPUMe7V53r663z",choiceBtn:"_1dG7SzbIkeLD0zJHmmhUnm",otherChoiceBtn:"QVsIDcz3e8ON1sgLHxCzi",fillIndex:"_26Kl-p0uKfBOPvHhSMfi1N",activeChoiceBtn:"_1cimtdODu3jHzNPjaILHAU",rightChoiceBtn:"_3wVb9ixhgQqPkNmvKM7oGU",answerContent:"_1yjrJA-TQbXl_8l5e6YGxh",analysisContent:"_3h0CWEX8H1i-OaJ-JJeqLM",choiceBlankWrap:"_3CjZiGx2JmQ0-RK9S9FYSM",rightFillAnswer:"-A_TkXFd0po5nBn_DQewb",iconWrap:"_-4Fvuqh1aW4WeoyN9vufD",rightIcon:"wG-uGSve-YuevW4PJvKlk",wrongIcon:"_1LT2nvtZ3KSZSBvQ5T4jFM",wrongFillAnswer:"PfflLcf2YvWIQlOZjZRwJ",sortBtnWrap:"_25W7fYTIJelFSD2fMG0hQV",sortBtn:"_2TiQqGtVlyh4u_FQsWnS8Z",choiceBlank:"_1lg1j3zn5oYaG9SIaMGgn"}},473:function(e,t,n){},502:function(e,t,n){"use strict";var r=n(52),a=n.n(r),i=n(8),s=n.n(i),o=n(240),c=n.n(o),u=n(46),l=n.n(u),p=n(47),d=n.n(p),m=n(48),S=n.n(m),f=n(49),E=n.n(f),h=n(50),_=n.n(h),I=n(89),g=n.n(I),w=n(33),T=n.n(w),v=n(1),A=n.n(v),y=n(59),P=n.n(y),O=(n(3),n(34)),b=n(208),L=n(389),C=n(220),R=n.n(C),N=n(212),U=n(255),x=n(463),D=n.n(x),Q=Object(N.a)("aq_right_hook.svg"),k=Object(N.a)("aq_wrong_hook.svg"),F=function e(t){return t<=26?String.fromCharCode(t+64):e(~~((t-1)/26))+e(t%26||26)};function j(e){var t=e.itemData,n=e.onChoiceItemClick,r=e.activeChocieItem,a=e.isAnswered,i=e.answerOpen,s=e.status,o=e.isObjective,c=e.answer,u=e.id,l=e.choiceBlankChange,p=e.isWrongQuesPage,d=e.handleFilePreView,m="",S="",f="",E=!1,h=Array.isArray(r)&&r.some(function(e){return e.index===t.rank});c&&c.map(function(e){e.rank==t.rank&&(E=!0)});var _=t.editable,I=t.answer?"rightIcon":"wrongIcon",g=t.answer?Q:k,w=t.answer?"正确":"错误";(h||E)&&(m="activeChoiceBtn"),a&&i&&(E?(m="answeredChoiceBtn",o&&(S=t.answer?"rightChoiceItem":"wrongChoiceItem")):m="otherChoiceBtn",t.answer&&(S="rightChoiceItem"),f=F(t.rank+1));var T=r&&!Object(O.isEmpty)(r)&&r.filter(function(e){return e.content})||[],v=!Object(O.isEmpty)(T)&&T[0].content||"",y=c&&!Object(O.isEmpty)(c)&&c.find(function(e){return e.answer}),P=!Object(O.isEmpty)(y)&&y.answer,L=P||v,C=p||a||2===s;return A.a.createElement("button",{className:R()(D.a.choiceItem,D.a[S]),onClick:function(){return n(t.rank,u,_)}},!(_&&!a)&&A.a.createElement("div",{className:R()(D.a.baseBtn,D.a[m])},f),A.a.createElement("div",{style:{maxWidth:"90%"}},A.a.createElement(U.a,{content:t.content,handleFilePreView:d})),_&&A.a.createElement(b.Input,{type:"text",placeholder:C?"":"点击填写答案",value:L,onChange:function(e){return l(e,t.rank,u)},style:{borderBottom:"1px solid"},disabled:C}),1===o&&1===i&&!!a&&(E||t.answer)&&A.a.createElement("div",{className:R()(D.a.iconStyle,D.a[I])},A.a.createElement("i",{style:{backgroundImage:"url(".concat(g,")")},className:D.a.iconHook}),A.a.createElement("span",null,w)))}j.defaultProps={activeChocieItem:[]};var q=j,G=n(465),W=n.n(G),B=Object(N.a)("aq_right_hook.svg"),M=Object(N.a)("aq_wrong_hook.svg");var V=function(e){var t=e.answer,n=e.rank,r=e.content,a=e.isAnswered,i=e.answerOpen,s=e.isObjective,o=e.isRightAnswer,c=e.itemInpVal,u=e.blankNum,l=e.onFillBlankChange,p=e.id,d=e.status,m=e.isWrongQuesPage,S="",f=t?"rightIcon":"wrongIcon",E=t?B:M,h=t?"正确":"错误";return!o&&s&&i&&a&&(S=t?"rightFillAnswer":"wrongFillAnswer"),A.a.createElement("div",{className:R()(W.a.inputWrapper,W.a[S])},A.a.createElement("div",{className:W.a.fillIndex},n+1),a||2===d||m?A.a.createElement("div",null,r):A.a.createElement(b.Input,{type:"text",placeholder:"点击填写答案",value:c,style:{width:"calc(100vw - 60px)"},onChange:function(e){return l(e,n,p,u)}}),1===s&&!!a&&!o&&1===i&&A.a.createElement("div",{className:R()(W.a.iconStyle,W.a[f])},A.a.createElement("i",{style:{backgroundImage:"url(".concat(E,")")},className:W.a.iconHook}),A.a.createElement("span",null,h)))},H=n(467),z=n.n(H);function J(e){var t=e.itemData,n=e.onSortItemClick,r=e.sortChoiceArr,a=e.isAnswered,i=e.sIndex,s=e.rightIndex,o=e.isRightAnswer,c=e.questionsId,u=e.sortNum,l=e.handleFilePreView,p=t.content,d=t.rank,m=!1,S="";a||(r.includes(d)&&(m=!0),r.map(function(e,t){e===d&&(S=t+1)}));var f=m||a||o?R()(z.a.baseBtn,z.a.answeredChoiceBtn):z.a.baseBtn,E=a?i:S;return 0===E&&(E="",f=z.a.baseBtn),o&&(E=s),A.a.createElement("div",null,A.a.createElement("button",{className:z.a.choiceItem,onClick:function(){return n(d,c,u)}},A.a.createElement("div",{className:f},E),A.a.createElement("div",{style:{maxWidth:"90%"}},A.a.createElement(U.a,{content:p,handleFilePreView:l}))))}J.defaultProps={itemData:{},sortChoiceArr:[]};var K=J,Y=n(233),Z=n.n(Y),X=Object(N.a)("aq_unfold.svg"),$=Object(N.a)("aq_fold.svg"),ee={title:{fontSize:"11px",fontWeight:400,color:"rgba(0,0,0,0.6)",padding:"12px 16px",borderBottom:"1px solid #E1E1E1"},analysisContent:{width:"100%",padding:"10px 16px",backgroundColor:"#fff",fontSize:"12px",borderBottom:"1px solid rgba(225,225,225,1)"},foldIcon:{width:"15px",height:"15px",display:"block",backgroundSize:"contain",marginBottom:"1px"}};function te(e){var t=e.review,n=e.isPaperQuestionsPage,r=e.handleFilePreView,a=Object(v.useState)(!0),i=Z()(a,2),o=i[0],c=i[1],u=o?"隐藏解析":"展开解析",l=o?$:X,p=s()({},ee.analysisContent,{color:"#32A999",border:"none",outline:"none"}),d=s()({},ee.foldIcon,{backgroundImage:"url(".concat(l,")")});return A.a.createElement(v.Fragment,null,o&&A.a.createElement("div",null,A.a.createElement("div",{style:ee.title},"解析"),t?A.a.createElement("div",{style:ee.analysisContent},A.a.createElement(U.a,{content:t,handleFilePreView:r})):A.a.createElement("div",{style:ee.analysisContent},"暂无解析")),n&&A.a.createElement("button",{onClick:function(){return c(!o)},style:p},A.a.createElement("div",{style:{display:"flex",alignItems:"center"}},A.a.createElement("i",{style:d}),A.a.createElement("span",null,u))))}te.defaultProps={itemData:{}};var ne=te,re=n(25),ae=n(26),ie=n(281),se=n(469),oe=n.n(se),ce=function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=S()(this,(e=E()(t)).call.apply(e,[this].concat(a))),T()(g()(g()(n)),"state",{recordingStatusShow:!1,voiceFilesName:[],leftTime:60,warnTips:"",showWarnTips:!1}),T()(g()(g()(n)),"showWranTips",function(e){n.warnTipsimer&&clearTimeout(n.warnTipsimer),n.setState({showWarnTips:!0,warnTips:e}),n.warnTipsimer=setTimeout(function(){n.setState({showWarnTips:!1})},2e3)}),T()(g()(g()(n)),"handleStartRecord",function(){if(n.props.isRecording){n.showWranTips("正在录音中")}else n.timer&&clearTimeout(n.timer),Object(ae.h)(n.startRecordSuc,n.startRecordFail,function(e){return n.maxOneMinAutoUpload(e)})}),T()(g()(g()(n)),"maxOneMinAutoUpload",function(e){n.timer&&clearTimeout(n.timer),n.setUploadingStatus(),n.handleUploadRecord(e),n.setState({recordingStatusShow:!1}),n.props.changeRecordingStatus(!1)}),T()(g()(g()(n)),"startRecordSuc",function(){n.setState({recordingStatusShow:!0}),n.props.changeRecordingStatus(!0),n.startTime=(new Date).getTime(),n.timerFunc(60)}),T()(g()(g()(n)),"startRecordFail",function(){n.setState({recordingStatusShow:!1}),n.props.changeRecordingStatus(!1);n.showWranTips("调用录音服务失败,请刷新后重试")}),T()(g()(g()(n)),"handleStopRecord",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.timer&&clearTimeout(n.timer),n.timer=null,n.endTime=(new Date).getTime(),n.endTime-n.startTime>200)Object(ae.i)(n.setUploadingStatus,function(t){return n.stopRecordCbFunc(t,e)},n.uploadWeixinFail);else{n.showWranTips("录音时间过短")}n.setState({recordingStatusShow:!1}),n.props.changeRecordingStatus(!1)}),T()(g()(g()(n)),"upLoadFail",function(){n.cancelUploadingStatus();n.showWranTips("语音转码失败")}),T()(g()(g()(n)),"stopRecordCbFunc",function(e,t){t?n.cancelUploadingStatus():n.handleUploadRecord(e)}),T()(g()(g()(n)),"handleUploadRecord",function(e){(0,n.props.uploadRecord)({serverId:e,saveWeixinRecordInfo:n.saveWeixinRecordInfo,upLoadFail:n.upLoadFail,cancelUploadingStatus:n.cancelUploadingStatus})}),T()(g()(g()(n)),"saveWeixinRecordInfo",function(e){var t=n.props;(0,t.saveWeixinRecordFile)(e,t.questionsId)}),T()(g()(g()(n)),"uploadWeixinFail",function(){n.cancelUploadingStatus();n.showWranTips("调用微信服务失败")}),T()(g()(g()(n)),"setUploadingStatus",function(){n.setState({uploading:!0})}),T()(g()(g()(n)),"cancelUploadingStatus",function(){n.setState({uploading:!1})}),T()(g()(g()(n)),"timerFunc",function(e){n.setState({leftTime:e}),e>0&&(n.timer=setTimeout(function(){e--,n.timerFunc(e),n.setState({leftTime:e})},1e3))}),T()(g()(g()(n)),"delRecordItem",function(e){var t=n.props;(0,t.delRecordFile)(e,t.questionsId)}),T()(g()(g()(n)),"delWeixinRecordItem",function(e){var t=n.props;(0,t.delWeixinRecordFile)(e,t.questionsId)}),T()(g()(g()(n)),"handleUploadVoice",function(e){var t=n.props,r=t.uploaderRecordFile,a=t.questionsId,i=e.target.files,s=(i[0]&&i[0].name||"").split(".").pop();if(i[0]&&i[0].size>52428800){return n.showWranTips("录音文件不能超过50M，请重新上传"),void(e.target.value="")}if(s&&"mp3"!==s){return n.showWranTips("音频文件只支持mp3格式"),void(e.target.value="")}i[0]&&(r(i[0],a),e.target.value="")}),T()(g()(g()(n)),"renderVoiceItem",function(e,t,r){var a=n.props.previewVoice,i=r?n.delWeixinRecordItem:n.delRecordItem;return A.a.createElement("div",{className:oe.a.voiceItem,key:t},A.a.createElement("div",{className:oe.a.voiceItemName},A.a.createElement("img",{src:"/images/audio.svg",alt:"",width:30}),A.a.createElement("span",{className:oe.a.voiceName},e.name)),A.a.createElement("div",null,A.a.createElement("button",{onClick:function(){return a(e.url,"mp3")}},"预览"),A.a.createElement("button",{className:oe.a.delBtn,onClick:function(){return i(t)}},"删除")))}),T()(g()(g()(n)),"renderRecordingStatus",function(){var e=n.state.leftTime;return A.a.createElement("div",{className:oe.a.recordItem},A.a.createElement("div",null,A.a.createElement("img",{src:"/images/audio.svg",alt:"",width:30}),A.a.createElement("span",{className:oe.a.recordTips},"正在录音，还剩".concat(e,"s"))),A.a.createElement("div",null,A.a.createElement("button",{onClick:function(){return n.handleStopRecord()}},"停止录音")))}),n}return _()(t,e),d()(t,[{key:"componentWillUnmount",value:function(){var e=this.props.isRecording;this.warnTipsimer&&clearTimeout(this.warnTipsimer),this.timer=null,e&&this.handleStopRecord(!0)}},{key:"render",value:function(){var e=this,t=this.state,n=t.recordingStatusShow,r=t.leftTime,a=t.uploading,i=t.showWarnTips,s=t.warnTips,o=this.props,c=o.recordsUrlArr,u=void 0===c?[]:c,l=o.weixinRecord,p=void 0===l?[]:l,d=o.isRecording,m=u.length+p.length>=10;return A.a.createElement("div",{style:{margin:"10px 0"}},u.length>0&&A.a.createElement("div",{className:oe.a.voicePrview},u.map(function(t,n){return e.renderVoiceItem(t,n)})),p.length>0&&A.a.createElement("div",{className:oe.a.voicePrview},p.map(function(t,n){return e.renderVoiceItem(t,n,!0)})),n&&r>0&&this.renderRecordingStatus(),A.a.createElement("div",{className:oe.a.uploadVoiceWrap},A.a.createElement("button",{disabled:m||d,className:oe.a.uploadBtn},A.a.createElement("input",{type:"file",accept:"audio/mpeg",disabled:m||d,onChange:this.handleUploadVoice}),A.a.createElement("span",null,"上传本地音频")),A.a.createElement("button",{disabled:m,onClick:this.handleStartRecord,className:oe.a.uploadBtn},"开始录音")),A.a.createElement("div",{className:oe.a.recordLimitTips},"超过1分钟请录制多个录音文件"),A.a.createElement(b.Toptips,{type:"warn",show:i},s),A.a.createElement(b.Toast,{icon:"loading",show:a},"上传中..."))}}]),t}(v.PureComponent);T()(ce,"defaultProps",{recordsUrlArr:[],weixinRecord:[]});var ue={uploadRecord:ie.uploadRecord,changeRecordingStatus:ie.changeRecordingStatus},le=Object(re.b)(null,ue)(ce),pe=n(270),de=n(250),me=n(471),Se=n.n(me),fe=(n(473),function(e){function t(){var e,n;l()(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return n=S()(this,(e=E()(t)).call.apply(e,[this].concat(i))),T()(g()(g()(n)),"state",{isFilterPopshow:!1,gallery:!1}),T()(g()(g()(n)),"onFileClick",function(e,t){n.setState({gallery:{url:e.url,id:t}})}),T()(g()(g()(n)),"deleteFileImg",function(e,t,r){(0,n.props.deleteQuestionsFile)(e,t,r),n.setState({gallery:n.props.shortQuestionsFiles.length<=1})}),T()(g()(g()(n)),"renderChoiceQuestions",function(){var e=n.props,t=e.questionsDetail,r=e.activeChocieItem,a=e.onChoiceItemClick,i=e.isPaperQuestionsPage,s=e.choiceBlankChange,o=e.isWrongQuesPage,c=t.isAnswered,u=t.answerOpen,l=t.answerContent,p=t.reviewOpen,d=t.isObjective,m=t.answer,S=t.review,f=t.type,E=t.id,h=t.status,_=n.getRightAnswerStr(),I=[];3===f&&(I=n.getYesOrNoChoiceArr());var g=n.getSortedAnswerContent(l),w=3===f?I:g;return A.a.createElement("div",null,w&&w.length>0&&w.map(function(e){return A.a.createElement(q,{key:e.rank,id:E,isAnswered:c,answerOpen:u,isObjective:d,status:h,isWrongQuesPage:o,itemData:e,onChoiceItemClick:a,activeChocieItem:r,answer:m,choiceBlankChange:s,handleFilePreView:n.props.handleFilePreView})}),1===c&&1===u&&1===d&&A.a.createElement("div",null,A.a.createElement("div",{className:Se.a.title},"正确答案"),A.a.createElement("div",{className:Se.a.answerContent},_)),1===c&&1===p&&A.a.createElement(ne,{review:S,isPaperQuestionsPage:i,handleFilePreView:n.props.handleFilePreView}))}),T()(g()(g()(n)),"getSortedAnswerContent",function(e){var t=[],n=!Object(O.isEmpty)(e)&&e.filter(function(e){return e.editable})||[];return e&&e.map(function(e){e.editable||(t=c()(t).concat([e]))}),c()(t).concat(c()(n))}),T()(g()(g()(n)),"getRightAnswerStr",function(){var e=n.props.questionsDetail.answerContent.filter(function(e){return e.answer}).map(function(e){return F(e.rank+1)});return e instanceof Array&&e.join(" ")}),T()(g()(g()(n)),"getYesOrNoChoiceArr",function(){var e=n.props.questionsDetail.answerContent;return[{rank:0,content:"是"},{rank:1,content:"否"}].map(function(t){return Object(O.isEmpty)(e)?t:s()({},t,{answer:t.rank==e[0].rank?e[0].answer:!e[0].answer})})}),T()(g()(g()(n)),"renderFillQuestions",function(){var e=n.props,t=e.questionsDetail,r=e.inpVal,i=void 0===r?[]:r,s=e.onFillBlankChange,o=e.isPaperQuestionsPage,c=e.isWrongQuesPage,u=t.answerContent,l=t.isAnswered,p=t.answerOpen,d=t.reviewOpen,m=t.isObjective,S=t.review,f=t.answer,E=t.blankNum,h=t.id,_=t.status,I=u&&u.filter(function(e){return e.answer}),g=E&&Array.from({length:E},function(e,t){return{rank:t}}),w=l?f:g;return A.a.createElement("div",null,w&&w.length>0&&w.map(function(e){return A.a.createElement(V,{key:e.rank,rank:e.rank,content:e.answer,answer:e.isCorrect,isAnswered:l,answerOpen:p,isObjective:m,itemInpVal:i[e.rank],blankNum:E,onFillBlankChange:s,id:h,status:_,isWrongQuesPage:c})}),1===m&&1===l&&1===p&&A.a.createElement("div",null,A.a.createElement("div",{className:Se.a.title},"正确答案"),I&&I.length>0&&I.map(function(e){return A.a.createElement(V,a()({key:e.rank},e,{content:e&&Array.isArray(e.content)&&e.content.join("，"),isAnswered:l,answerOpen:p,isRightAnswer:!0}))})),1===l&&1===d&&A.a.createElement(ne,{review:S,isPaperQuestionsPage:o,handleFilePreView:n.props.handleFilePreView}))}),T()(g()(g()(n)),"renderSortQuestions",function(){var e=n.props,t=e.onSortItemClick,r=e.sortChoiceArr,a=e.resetSort,i=e.questionsDetail,s=e.isPaperQuestionsPage,o=i.answerContent,c=i.isAnswered,u=i.answer,l=i.answerOpen,p=i.reviewOpen,d=i.review,m=i.id,S=u&&u.map(function(e){return e.rank}),f=(o&&!Object(O.isEmpty)(o)&&o.map(function(e){return e.answer+1})||[]).join(",");return A.a.createElement("div",null,A.a.createElement("div",{style:{position:"relative"}},A.a.createElement("div",null,o&&o.map(function(e){return A.a.createElement(K,{key:e.rank,itemData:e,onSortItemClick:t,sortChoiceArr:r,isAnswered:c,sIndex:S&&S.findIndex(function(t){return e.rank===t})+1,sortNum:o.length,questionsId:m,handleFilePreView:n.props.handleFilePreView})})),!c&&A.a.createElement("div",{className:Se.a.sortBtnWrap},A.a.createElement("button",{className:Se.a.sortBtn,onClick:a},"重新排序"))),1===l&&1===c&&A.a.createElement("div",{style:{marginTop:"5px"}},A.a.createElement("div",{className:Se.a.title},"正确答案"),A.a.createElement("div",{className:Se.a.choiceItem},f)),1===c&&1===p&&A.a.createElement(ne,{review:d,isPaperQuestionsPage:s,handleFilePreView:n.props.handleFilePreView}))}),T()(g()(g()(n)),"renderShortAnswerQuestions",function(){var e=n.props,t=e.questionsDetail,r=e.shortQuestionsInp,a=e.shortQuestionsInpChange,i=e.shortQuestionsFiles,s=e.shortQuestionsUploaderFile,o=e.isPaperQuestionsPage,c=e.isWrongQuesPage,u=e.uploaderRecordFile,l=e.delRecordFile,p=e.delWeixinRecordFile,d=e.recordsUrlArr,m=e.weixinRecord,S=e.saveWeixinRecordFile,f=e.isRecording,E=t.isAnswered,h=t.answer,_=t.id,I=t.status,g=t.reviewOpen,w=t.answerOpen,T=t.review,v=t.answerContent,y=h&&h.attaches&&!Object(O.isEmpty)(h.attaches);return A.a.createElement("div",null,E||2===I||c?A.a.createElement("div",null,A.a.createElement("div",{className:Se.a.answerContent},h&&h.answer),A.a.createElement("div",{style:{padding:"6px 16px",backgroundColor:"#fff"}},y&&n.renderAttaches()),v&&!Object(O.isEmpty)(v)&&1===E&&1===w&&A.a.createElement("div",null,A.a.createElement("div",{className:Se.a.title},"参考答案"),A.a.createElement("div",{className:Se.a.answerContent},A.a.createElement(U.a,{content:v[0]&&v[0].content,handleFilePreView:n.props.handleFilePreView}))),1===E&&1===g&&A.a.createElement(ne,{review:T,isPaperQuestionsPage:o,handleFilePreView:n.props.handleFilePreView})):A.a.createElement("div",null,A.a.createElement(b.TextArea,{placeholder:"点击填写答案",showCounter:!1,style:{height:"200px",padding:"14px 16px"},value:r,onChange:function(e){return a(e,_)}}),A.a.createElement(le,{previewVoice:n.props.handleFilePreView,uploaderRecordFile:u,delRecordFile:l,delWeixinRecordFile:p,recordsUrlArr:d,weixinRecord:m,saveWeixinRecordFile:S,questionsId:_,isRecording:f}),A.a.createElement("div",{style:{padding:"16px"}},n.renderGallery(i,t.id),A.a.createElement(de.b,{title:"",maxCount:3,files:i,onError:function(e){return alert(e)},onChange:function(e,t){return s(e,t,_)},onFileClick:function(e,t,r){return n.onFileClick(t,r)},lang:{maxError:function(e){return"最多只能上传".concat(e,"张")}},capture:void 0}))))}),T()(g()(g()(n)),"renderReadQuestions",function(){var e=n.props,t=e.questionsDetail,r=e.isPaperQuestionsPage,a=t.isAnswered,i=t.reviewOpen,s=t.review;return A.a.createElement("div",null,1===a&&1===i&&A.a.createElement(ne,{review:s,isPaperQuestionsPage:r,handleFilePreView:n.props.handleFilePreView}))}),T()(g()(g()(n)),"isRecordUrl",function(e){var t=e.split(".");return"mp3"===t[t.length-1]}),T()(g()(g()(n)),"renderAttaches",function(){var e=n.props.questionsDetail.answer,t=e&&e.attaches,r=t&&t.filter(function(e){return!n.isRecordUrl(e)}),a=t&&t.filter(function(e){return n.isRecordUrl(e)}),i=r&&r.map(function(e){return{url:e}});return A.a.createElement("div",null,r&&r.map(function(e,t){return A.a.createElement("button",{key:t,onClick:function(){return n.onFileClick({url:e},t)},style:{border:"none",outline:"none",backgroundColor:"transparent"}},A.a.createElement("img",{src:encodeURI(e),width:100,height:100,alt:"",style:{margin:"5px"}}))}),a&&a.map(function(e,t){return A.a.createElement(pe.a,{key:t,fileUrl:e,name:"音频".concat(t+1),typeText:"mp3",handleFilePreView:n.props.handleFilePreView})}),n.renderGallery(i))}),T()(g()(g()(n)),"renderQuestionsDetail",function(){switch(n.props.questionsDetail.type){case 0:return n.renderReadQuestions();case 1:case 2:case 3:return n.renderChoiceQuestions();case 4:return n.renderFillQuestions();case 5:return n.renderShortAnswerQuestions();case 6:return n.renderSortQuestions()}}),n}return _()(t,e),d()(t,[{key:"renderGallery",value:function(e,t){var n=this,r=this.props.questionsDetail,a=r.status,i=r.isAnswered;if(!this.state.gallery)return!1;var s=e.map(function(e){return e.url});return P.a.createPortal(A.a.createElement(de.a,{src:s,show:!0,defaultIndex:this.state.gallery.id,onClick:function(e){e.preventDefault(),e.stopPropagation(),n.setState({gallery:!1})}},0===i&&(1===a||3===a)&&A.a.createElement(b.GalleryDelete,{onClick:function(e,r){return n.deleteFileImg(e,r,t)}})),document.body)}},{key:"render",value:function(){var e=this.props,t=e.questionsDetail,n=e.id,r=e.isPaperQuestionsPage,i=e.isWrongQuesPage,s=e.handleFilePreView,o=t.isAnswered,c=t.type,u=t.status,l=n&&n.split("-")[1],p="请填写你的答案";return o||i||2===u?p="你的答案":([1,2,3].includes(c)&&(p="请选择你的答案"),0===c&&(p=""),6===c&&(p="请依次点击排序")),A.a.createElement("div",{id:n,style:{marginBottom:"24px"}},A.a.createElement(L.a,a()({},t,{index:l,isPaperQuestionsPage:r,isWrongQuesPage:i,handleFilePreView:s})),0!==c&&A.a.createElement("div",{className:Se.a.title},p),this.renderQuestionsDetail())}}]),t}(v.PureComponent));T()(fe,"defaultProps",{questionsDetail:{}});t.a=fe},956:function(e,t,n){e.exports={btnStyle:"_1tCbjFYivbf35NsLemrmG8",answerSheetWrap:"s5aL2vkpTvwZL2k3p8VtR",closeBtn:"_2P80FtXLoVtTwu_tUkyPJQ",numberWrap:"fPWAoBSzp5ZhjgYGTi1rp",numberItem:"_2EbX39brXxTwzWD-jn21m8",lengend:"FRfTErkGgqX1MPxP9vzUq",statusCircle:"_3_uAgYGxMHtDMtRVqA6f85",isNowAnswered:"_1Dq1_U-jpIoSos_849-xVX",noAnswered:"_1FHNXKRieYDMMZdK5a_Hcg",isAnswered:"Yn8NC1jOqIHFnzIhbOa1x",answeredRight:"_10dNkd3n2iLZko6PKiE_mW",answeredWrong:"_1_9Wn00tUphNPvY6LMZPAr",sheetCloseIcon:"f6ZOGsNpbNSUkiqcp2w6M"}},958:function(e,t,n){e.exports={btnStyle:"_3XvLnARqgYUYywp85p2b-d",header:"mcD7ZsWRXmkJzNktCMqlv",rightWrap:"mhncHIIMqFiV5fw53_ZL9",btnGroup:"aOEqkLY9eCJPqHus6gle4",submitBtn:"KmUWDwEDkQ4GPJe4bBfdj",refreshBtn:"_2YbllEM_4q-pKVZFbbcbB8",leftWrap:"sPLMYycrCBpthx5EBjyGL",title:"_3bVI-5drzDGmiGBQC2Pr-X",difficultStarWrap:"_1kAbcWYF7ela9prqngg25w",difficultStar:"_2SDPEgjBZkPc82hwRWGaEa",navigationIcon:"_2sDpyQYmJb3L3zP5MIUjfY",listWrap:"_3r37v-3apQa42bIQ_raL7M",btn:"_2h_lJG4y6wRP5RuKD4zbDP",timeBtn:"tHRUzgnvg5Imtx6mXvc-e",alarmIcon:"_2D9MloHOdNEyq2VLpmpxp2",refreshIcon:"_1LYKzEdroTSBxIYB4CIZCU",sureDialog:"_32cLE0BJ5tbKT9Zdl0MwuZ",previewIframe:"_1MJSeH-qASwvK9VUnpSdc5"}},960:function(e,t,n){}}]);